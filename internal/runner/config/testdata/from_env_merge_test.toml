# Test file to verify from_env merge behavior at Group level
# Global defines some from_env variables, Group adds more

version = "1.0"

[global]
workdir = "/tmp"
env_allowed = ["HOME", "USER", "PATH", "LANG"]
# Global defines home and user from system environment
env_import = ["home=HOME", "user=USER"]

[global.vars]
base_dir = "%{home}/app"

[[groups]]
name = "merge_group"
# Group adds PATH to the inherited variables
# Expected result: home, user (from Global) + path (from Group)
env_import = ["path=PATH"]
env_vars = [
    "HOME_VAR=%{home}",
    "USER_VAR=%{user}",
    "PATH_VAR=%{path}",
    "COMBINED=%{combined_env}"
]

[groups.vars]
log_dir = "%{base_dir}/logs"
combined_env = "%{home}:%{user}:%{path}"

[[groups.commands]]
name = "verify_merge"
cmd = "/bin/echo"
args = ["Test merge: HOME=%{home}, USER=%{user}, PATH=%{path}"]
