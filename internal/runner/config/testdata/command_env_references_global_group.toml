# Integration test: Command.Env with Global/Group vars reference
# This test validates:
# - Command.Env can reference internal variables from Global/Group
# - Cmd can reference internal variables
# - Args can reference internal variables
# - Variable priority: Command vars > Group vars > Global vars
# - New system: vars (internal variables) and %{VAR} syntax

[global]
vars = ["base_dir=/opt"]
env = ["BASE_DIR=%{base_dir}"]
env_allowlist = ["HOME", "PATH"]

[[groups]]
name = "app_group"
vars = ["app_dir=%{base_dir}/myapp"]
env = ["APP_DIR=%{app_dir}"]

[[groups.commands]]
name = "run_app"
cmd = "%{app_dir}/bin/server"
args = ["--log", "%{log_dir}/app.log"]
vars = ["log_dir=%{app_dir}/logs"]
env = ["LOG_DIR=%{log_dir}"]
