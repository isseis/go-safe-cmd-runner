# 実行計画書：日本語ドキュメントの実装整合性検証プロジェクト

## 1. 実行計画の概要

このドキュメントは、`docs/user/` 配下の日本語ドキュメント (*.ja.md) と実装の整合性を検証し、必要な修正を行うプロジェクトの実行計画を定義する。

## 2. 検証対象ファイル一覧

### 2.1. docs/user/ 直下のファイル

| No. | ファイル名 | 検証ID | 状態 | 備考 |
|-----|-----------|--------|------|------|
| 1 | README.ja.md | V-001 | 🔧 Fixed | プロジェクト概要、クイックスタート |
| 2 | runner_command.ja.md | V-001 | 🔧 Fixed | runner コマンドの引数・オプション |
| 3 | record_command.ja.md | V-001 | ⬜ Not Started | record コマンドの引数・オプション |
| 4 | verify_command.ja.md | V-001 | ⬜ Not Started | verify コマンドの引数・オプション |
| 5 | command_templates.ja.md | V-003 | ⬜ Not Started | コマンドテンプレート機能 |
| 6 | dry_run_json_schema.ja.md | V-003 | ⬜ Not Started | ドライラン JSON スキーマ |
| 7 | security-risk-assessment.ja.md | V-003 | ⬜ Not Started | セキュリティリスク評価 |

### 2.2. docs/user/toml_config/ 配下のファイル

| No. | ファイル名 | 検証ID | 状態 | 備考 |
|-----|-----------|--------|------|------|
| 8 | README.ja.md | V-002 | ⬜ Not Started | TOML 設定概要 |
| 9 | 01_introduction.ja.md | V-002 | ⬜ Not Started | TOML 設定の導入 |
| 10 | 02_hierarchy.ja.md | V-002 | ⬜ Not Started | 設定の階層構造 |
| 11 | 03_root_level.ja.md | V-002 | ⬜ Not Started | ルートレベル設定 |
| 12 | 04_global_level.ja.md | V-002 | 🔧 Fixed | グローバルレベル設定 |
| 13 | 05_group_level.ja.md | V-002 | 🔧 Fixed | グループレベル設定 |
| 14 | 06_command_level.ja.md | V-002 | 🔧 Fixed | コマンドレベル設定 |
| 15 | 07_command_templates.ja.md | V-002 | 🔧 Fixed | コマンドテンプレート設定 |
| 16 | 08_variable_expansion.ja.md | V-002 | ✅ Completed | 変数展開機能 |
| 17 | 09_practical_examples.ja.md | V-002 | ⬜ Not Started | 実践的な設定例 |
| 18 | 10_best_practices.ja.md | V-002 | ⬜ Not Started | ベストプラクティス |
| 19 | 11_troubleshooting.ja.md | V-002 | ⬜ Not Started | トラブルシューティング |
| 20 | appendix.ja.md | V-002 | ⬜ Not Started | 付録（設定キー一覧等） |

## 3. 検証手順

### 3.1. 各ファイルの検証ステップ

各ファイルに対して、以下のステップを実施する：

#### Step 1: 実装コードの確認
- 関連する Go ソースコード (`cmd/`, `internal/`) を読み、現在の実装仕様を把握する
- コマンドライン引数、設定キー、機能動作を確認する
- テストコード (`*_test.go`) から期待される動作を把握する

#### Step 2: ドキュメントとの照合
- ドキュメント内の記述と実装コードを比較する
- 以下の項目を重点的にチェックする：
  - コマンドライン引数の名前、型、デフォルト値
  - 設定キーの名前、型、デフォルト値、必須/任意
  - 機能の動作説明
  - サンプルコード、設定例の構文と妥当性
  - エラーメッセージや制約事項
  - 変数記法の統一性（`${VAR}` vs `$VAR` 等）

#### Step 3: 英語版との比較
- 対応する英語版ドキュメント (.md) と構造を比較する
- セクション構成、見出しレベル、コード例の配置が一致しているか確認する
- 英語版に存在するが日本語版に欠落している情報を特定する

#### Step 4: 実行検証（該当する場合）
- ドキュメント内のコマンド例を実際に実行し、動作を確認する
- 設定例を使用してテストを実行し、有効性を検証する

#### Step 5: 修正と記録
- 発見した問題点をドキュメントに反映する
- 修正内容をチェックリストに記録する
- Git コミットメッセージに検証IDと変更内容を明記する

### 3.2. 優先順位

検証は以下の優先順位で実施する：

**優先度: 高**
1. README.ja.md - プロジェクトの入り口となるドキュメント
2. runner_command.ja.md - 最も頻繁に使用されるコマンド
3. 04_global_level.ja.md, 05_group_level.ja.md, 06_command_level.ja.md - コア設定

**優先度: 中**
4. 08_variable_expansion.ja.md - 重要機能
5. 07_command_templates.ja.md - 新機能
6. record_command.ja.md, verify_command.ja.md
7. 03_root_level.ja.md, 02_hierarchy.ja.md

**優先度: 低**
8. その他の補助的なドキュメント
9. 付録、トラブルシューティング

## 4. チェックリスト

### 4.1. 検証項目チェックリスト

各ファイルに対して、以下のチェック項目を確認する：

- [ ] **コマンドライン引数の正確性**（該当する場合）
  - [ ] 引数名が実装と一致している
  - [ ] 短縮形オプション（例：`-c`, `-n`）が正確に記載されている
  - [ ] デフォルト値が正しい
  - [ ] 必須/任意の表示が正確

- [ ] **設定キーの正確性**（TOML 設定ドキュメントの場合）
  - [ ] キー名が実装と一致している
  - [ ] データ型（string, bool, int, array, table）が正確
  - [ ] デフォルト値が正しい
  - [ ] 必須/任意の表示が正確
  - [ ] 新しく追加された設定が記載されている
  - [ ] 廃止された設定が削除されている

- [ ] **機能説明の正確性**
  - [ ] 機能の動作説明が実装と一致している
  - [ ] 制約事項や注意事項が最新の実装を反映している
  - [ ] エラーメッセージが正確

- [ ] **サンプルコードの妥当性**
  - [ ] コード例の構文が正しい
  - [ ] コード例が実際に動作する
  - [ ] 構文ハイライト指定（```toml, ```bash 等）が正確

- [ ] **英語版との一貫性**
  - [ ] セクション構成が英語版と一致している
  - [ ] 見出しレベルが対応している
  - [ ] 英語版にあって日本語版にない情報がない
  - [ ] 変数記法が統一されている

- [ ] **リンクと参照の有効性**
  - [ ] 内部リンクが正しいファイルを参照している
  - [ ] 外部リンク（該当する場合）が有効

### 4.2. 進捗状況の記録方法

チェックリストの状態欄には、以下の記号を使用する：

- ⬜ **Not Started**: 未着手
- 🔄 **In Progress**: 検証中
- ✅ **Completed**: 検証完了（修正不要）
- 🔧 **Fixed**: 検証完了（修正あり）
- ⚠️ **Issue Found**: 問題発見（修正保留中）

## 5. 成果物

本プロジェクトの完了時には、以下の成果物が生成される：

1. **更新された日本語ドキュメント** - 実装と整合した最新のドキュメント
2. **検証結果レポート** - 発見した問題点と修正内容の一覧
3. **Git コミット履歴** - 各修正のトレーサビリティ
4. **検証手順書** - 今後の定期検証に再利用可能な手順

## 6. スケジュール

検証作業は、優先度に従って段階的に実施する：

- **Phase 1** (優先度: 高): 1-2週間
  - ✅ 主要ドキュメントの検証完了
  - ✅ 全ドキュメントのリンク切れ修正と検証スクリプトの改善完了 (2025/12/14)
- **Phase 2** (優先度: 中): 1-2週間
- **Phase 3** (優先度: 低): 1週間

## 7. レビューとフィードバック

- 各ファイルの検証完了後、変更内容をコミットする
- 重要な変更については、プロジェクトメンバーにレビューを依頼する
- 発見した実装上の問題（ドキュメントではなくコード側の問題）は、別途イシューとして記録する

## 8. 自動化の検討

将来的な定期検証の効率化のため、以下の自動化を検討する：

- TOML 設定キーの存在確認スクリプト
- コマンドライン引数の抽出と照合スクリプト
- 英語版と日本語版の構造差分チェックスクリプト
- リンク切れチェックツールの活用
