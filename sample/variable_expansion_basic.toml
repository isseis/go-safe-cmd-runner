# Basic Variable Expansion Examples
# This file demonstrates simple variable expansion patterns using %{VAR} format
version = "1.0"

[global]
timeout = 30
workdir = "/tmp"
log_level = "info"
skip_standard_paths = true
env_allowlist = [
    "PATH",
    "HOME",
    "USER",
]

# Example 1: Variable expansion in command name
[[groups]]
name = "cmd_expansion"
description = "Expand variables in command name"

[[groups.commands]]
name = "docker_command"
description = "Use Docker command with variable path"
cmd = "%{docker_cmd}"
args = ["version"]
vars = ["docker_cmd=/usr/bin/docker"]

# Example 2: Variable expansion in arguments
[[groups]]
name = "args_expansion"
description = "Expand variables in command arguments"

[[groups.commands]]
name = "copy_file"
description = "Copy file using variables in args"
cmd = "/bin/cp"
args = ["%{home}/source.txt", "%{backup_dir}/backup.txt"]
from_env = ["home=HOME"]
vars = ["backup_dir=/opt/backups"]

# Example 3: Multiple variables in one string
[[groups]]
name = "multiple_vars"
description = "Use multiple variables in a single argument"

[[groups.commands]]
name = "ssh_connection"
description = "Build SSH connection string from variables"
cmd = "/usr/bin/ssh"
args = ["%{user}@%{hostname}:%{port}"]
vars = [
    "user=admin",
    "hostname=server01",
    "port=22"
]

# Example 4: Path construction with variables
[[groups]]
name = "path_construction"
description = "Build file paths dynamically"

[[groups.commands]]
name = "custom_tool"
description = "Execute tool from variable directory"
cmd = "%{tool_dir}/my-script"
args = ["--input", "%{input_file}", "--output", "%{output_file}"]
vars = [
    "tool_dir=/opt/tools",
    "input_file=/data/input.txt",
    "output_file=/data/output.txt"
]

# Example 5: Environment-specific configuration
[[groups]]
name = "env_switching"
description = "Switch behavior based on environment type"

[[groups.commands]]
name = "deploy_script"
description = "Run deployment with environment-specific settings"
cmd = "%{app_dir}/deploy.sh"
args = ["--env", "%{env_type}", "--region", "%{region}"]
vars = [
    "app_dir=/opt/myapp",
    "env_type=production",
    "region=us-west-2"
]
